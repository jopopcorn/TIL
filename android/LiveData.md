# LiveData

### 특징

- LiveData는 관측 가능한(observable) 데이터 홀더 클래스이다.
- LiveData는 수명 주기를 인식해 Activity, Fragment, Service 등 다른 앱 컴포넌트의 수명 주기를 고려한다.
- LiveData는 데이터베이스와 UI 사이에 있다.
- LiveData는 데이터베이스의 변경 사항을 모니터하고 데이터가 변경될 때 관찰자(observer)에게 알릴 수 있다. 이것은 Observer(관찰자) 패턴 덕분에 가능하다. 싱글턴(Singleton) 패턴과 유사하게, 옵저버 패턴은 소프트웨어 개발에서 가장 일반적인 디자인 패턴 중 하나이다.
- 지속적으로 재쿼리할 필요 없이 데이터베이스의 변경 사항을 통보받을 수 있다.

### 동작 방식

옵저버라고 불리는 클래스들은 우리가 말하는 대상(subject)를 구독한다.

LiveData의 객체인 subject는 해당 개체에 가입한 모든 관찰자들의 목록을 보관하고, 관련 변경 사항이 있을 경우 모든 관찰자에게 알린다. 보다 구체적으로 말하자면, 데이터가 변경될 때 LiveData 객체의 설정 값 메서드가 호출된다.

그러면 각 관찰자의 메서드에 대한 호출이 트리거된다.

그러면 옵저버들이 트리거가 일어났을 때 그들이 해야 할 일이 무엇이든지 할 것이다. 이 경우 업데이트된 데이터를 사용하여 UI에 업데이트하는 것이다.

### 장점

- UI와 데이터 상태의 일치 보장
    - LiveData는 옵저버 패턴을 따른다.
    - 기본 데이터가 변경될 때 Observer 객체에 알린다.
    - 코드를 통합하여 Observer 객체에 UI를 업데이트할 수 있다.
- 메모리 누수 없음
    - 옵저버는 `Lifecycle` 객체에 결합되어 있으며 연결된 수명 주기가 끝나면 자동 삭제된다.
- 중지된 Activity으로 인한 비정상 종료 없음
    - Activity가 백 스택에 있을 때를 비롯해 옵저버의 수명 주기가 비활성 상태면 옵저버는 어떤 LiveData 이벤트도 받지 않는다.
- 수명 주기를 더 이상 수동으로 처리하지 않음
    - UI 구성요소는 관련 데이터를 관찰하기만 할 뿐 관찰을 중지하거나 다시 시작하지 않는다.
    - LiveData는 관찰하는 동안 관련 수명 주기 상태의 변경을 인식하므로 이 모든 것을 자동으로 관리한다.
- 최신 데이터 유지
    - 수명 주기가 비활성화되면 다시 활성화될 때 최신 데이터를 수집한다.
    - ex. 백그라운드에 있었던 Activity가 포그라운드로 돌아온 직후 최신 데이터를 받는다.
- 적절한 구성 변경
    - 기기 회전과 같은 구성 변경으로 인해 Activity나 Fragment가 다시 생성되면 사용 가능한 최신 데이터를 즉시 받게 된다.
- 리소스 공유
    - 앱에서 시스템 서비스를 공유할 수 있도록 싱글톤 패턴을 사용하는 `LiveData` 객체를 확장하여 시스템 서비스를 래핑할 수 있다.
    - `LiveData` 객체가 시스템 서비스에 한 번 연결되면 리소스가 필요한 모든 관찰자가 `LiveData` 객체를 볼 수 있다.
