# Git 내부 동작 원리

- git add: 워킹 트리에 존재하는 파일들을 stage에 추가하는 명령
    - 파일 - 파일의 checksum 값과 동일한 이름을 가진 ***blob** 객체를 생성 (위치: .git/objects)
    - 스테이지의 위치: .git/index

    ***blob (binary large object)**

- git status로 ***clean한 상태**: '워킹 트리 = 스테이지 = HEAD' 커밋

***clean한 상태란 워킹 트리, 스테이지, 헤드 커밋의 내용이 모두 똑같다는 것을 말한다.**

- 커밋을 하면 스테이지의 객체로 트리가 만들어진다.
- 커밋에는 커밋 메시지와 트리 객체가 포함된다.
- git commit: 스테이지의 내용을 가지고 트리 객체를 만들고, 이 트리 객체를 기반으로 기존 HEAD 커밋을 부모로 하는 새로운 커밋을 만든다. 마지막으로 생성된 커밋은 다시 HEAD가 된다.
- 브랜치는 커밋의 참조일 뿐이다.
- git checkout: 해당 브랜치를 HEAD로 이동시키고 스테이지와 워킹 트리를 HEAD가 가르키는 커밋과 동일한 내용으로 변경하는 것

요약

- git add 명령을 수행하면 워킹트리의 내용을 스테이지에 추가한다.
- git commit 명령을 수행하면 스테이지의 내용으로 새로운 커밋을 만든다.
- 커밋 이후 git status 명령을 내리면 clean한 상태임을 표시해 주는데, 이 상태는 워킹트리, 스테이지, HEAD 커밋들이 모두 동일한 내용을 담고 있다는 뜻이다.
- 커밋 객체는 트리 객체와 blob 객체들의 조합으로 이루어져 있다.
- 커밋 객체는 부모 커밋에 대한 참조를 가지고 있다.
- 브랜치를 생성하면 단순히 브랜치 파일 하나를 추가한다.
- 브랜치를 체크아웃하면 HEAD를 해당 브랜치로 변경하고 브랜치가 참조하는 커밋의 내용으로 스테이지와 워킹트리의 내용을 변경한다.
